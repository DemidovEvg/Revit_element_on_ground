
# Revit_element_on_ground
Скрипт CreateOnGround_v5.dyn позволяет рисовать кабельные сети(кабель, траншеи, трубы, соединительные муфты) в Revit.
Для создания использовались стандартные ноды Dynamo, а также ноды на языке Python.
Алгоритм работы:
1) Рисуются полилинии на виде сверху, которые отражают траекторию кабеля, траншеи, труб
2) Выделяются нужные полилинии
3) Запускается первая часть скрипта, которая проходит по всем полилиниям и создает на нулевом слое объекты семейств на основе линий(специальные семейства с двумя базовыми точками)
4) На следующем этапе запускается вторая часть скрипта, которая поднимает отрезки элементов на нужные кооринаты. 
    Точки для подъема определяются следующим образом: 
    - из точек элементов создаются виртуальные вертикальные линии.
    - анализируются все точки на поверхности и находятся три ближайшие точки, создающие плоскость которую пересекает вертикальная линия.
    - точка пересечения линии и плоскости из трех точек определяет точку для подъема элемета(начала или конца элемента)
5) После того как элементы подняты необходимо состыковать их. Для этого в семействах реализованы начальный и конечный сегменты, которы поворачиваются вдоль оси элемента, а также сгибаются на нужный угол. 
    

![Семейство кабеля](https://user-images.githubusercontent.com/88984484/130328234-571d1546-24c4-4298-ac6d-fcd0c0fec665.png)
![стыковка](https://user-images.githubusercontent.com/88984484/130328216-1270f603-cc42-4d06-8f36-dfbbe5254183.png)

Put element on Revit and place them on the ground
![Рисунок 1](https://user-images.githubusercontent.com/88984484/130327701-b955a6b1-528c-4952-aa00-6faec8c737c7.png)
![Рисунок 3](https://user-images.githubusercontent.com/88984484/130329056-63074a1d-0228-4892-ad8f-1d2dc4aa9b04.png)
